---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title} showSidebar={true} isBlog={true}>
    <div class="max-w-3xl mx-auto px-6 py-12">
        <header class="text-center mb-16">
            <a href="/dashboard" class="inline-block group">
                <h1 class="text-4xl font-black tracking-tighter text-white mb-2 group-hover:text-blue-400 transition-colors">KELAS TKJ</h1>
                <p class="text-xs text-slate-500 font-bold uppercase tracking-[0.2em]">Learning & Gaming Platform</p>
            </a>
            
            <nav class="flex justify-center items-center gap-10 mt-12 text-xs font-black uppercase tracking-widest">
                <a href="/dashboard" class="text-slate-500 hover:text-white transition-colors">Dashboard</a>
                <a href="/game" class="text-slate-500 hover:text-white transition-colors">Games</a>
                <a href="/blog" class="text-blue-500 border-b-2 border-blue-500 pb-2">Blog Room</a>
            </nav>
        </header>

        <!-- Article -->
        <article class="max-w-3xl mx-auto px-6 py-16">
            <!-- Meta -->
            <div class="mb-12">
                <time class="text-sm text-slate-500 dark:text-slate-500">
                    {entry.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
                
                <h1 class="text-4xl md:text-5xl font-extrabold text-slate-900 dark:text-white mt-4 mb-6 leading-tight tracking-tight">
                    {entry.data.title}
                </h1>
                
                <div class="flex flex-wrap gap-2 mb-6">
                    {entry.data.tags.map((tag: string) => (
                        <span class="text-xs px-2 py-1 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400">
                            #{tag}
                        </span>
                    ))}
                </div>

                <div class="h-px bg-slate-200 dark:bg-slate-800"></div>
            </div>

            <!-- Content -->
            <div class="prose prose-slate dark:prose-invert max-w-none
                        prose-headings:font-bold prose-headings:tracking-tight
                        prose-h1:text-4xl prose-h1:mb-6
                        prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4
                        prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3
                        prose-p:text-slate-700 dark:prose-p:text-slate-300 prose-p:leading-7
                        prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:no-underline hover:prose-a:underline
                        prose-strong:text-slate-900 dark:prose-strong:text-white prose-strong:font-semibold
                        prose-code:text-blue-600 dark:prose-code:text-blue-400 prose-code:bg-slate-100 dark:prose-code:bg-slate-800 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:before:content-none prose-code:after:content-none prose-code:font-normal
                        prose-pre:bg-slate-900 dark:prose-pre:bg-slate-900 prose-pre:border prose-pre:border-slate-200 dark:prose-pre:border-slate-800
                        prose-ul:text-slate-700 dark:prose-ul:text-slate-300
                        prose-ol:text-slate-700 dark:prose-ol:text-slate-300
                        prose-li:marker:text-slate-500 dark:prose-li:marker:text-slate-500
                        prose-blockquote:border-l-blue-600 dark:prose-blockquote:border-l-blue-400 prose-blockquote:bg-slate-50 dark:prose-blockquote:bg-slate-900 prose-blockquote:py-1 prose-blockquote:px-4 prose-blockquote:not-italic
                        prose-hr:border-slate-200 dark:prose-hr:border-slate-800
                        prose-table:text-sm
                        prose-th:bg-slate-50 dark:prose-th:bg-slate-900 prose-th:border-slate-200 dark:prose-th:border-slate-800 prose-th:font-semibold
                        prose-td:border-slate-200 dark:prose-td:border-slate-800
                        prose-img:rounded-lg">
                <Content />
            </div>

            <!-- Footer Actions -->
            <div class="mt-16 pt-8 border-t border-slate-200 dark:border-slate-800">
                <div class="flex justify-between items-center">
                    <a href="/blog" class="text-sm text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                        All posts
                    </a>
                    <div class="flex gap-3 text-sm">
                        <button onclick="window.print()" class="text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors">
                            Print
                        </button>
                        <button onclick="navigator.share ? navigator.share({title: document.title, url: window.location.href}) : alert('Share not supported')" 
                                class="text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors">
                            Share
                        </button>
                    </div>
                </div>
            </div>
        </article>

    </div>
</Layout>
